
{% extends "base.html" %}

{% block title %}ЁЯЧ│я╕П ржмрж╛ржВрж▓рж╛ржжрзЗрж╢ ржЬржиржоржд рж╕ржВржЧрзНрж░рж╣ - ржнрзЛржЯ ржжрж┐ржи!{% endblock %}

{% block content %}
<div style="text-align: center; margin-bottom: 30px;">
    <h1>ЁЯЧ│я╕П ржмрж╛ржВрж▓рж╛ржжрзЗрж╢ ржЬржиржоржд рж╕ржВржЧрзНрж░рж╣</h1>
    <div style="background: rgba(255, 255, 255, 0.2); padding: 20px; border-radius: 15px; margin: 20px 0;">
        <h2 style="color: #FFD700; margin-bottom: 15px;">ЁЯФе ржПржЦржиржЗ ржнрзЛржЯ ржжрж┐ржи!</h2>
        <p style="font-size: 18px; line-height: 1.6;">
            тЬи ржЖржкржирж╛рж░ ржкржЫржирзНржжрзЗрж░ рж░рж╛ржЬржирзИрждрж┐ржХ ржжрж▓ржХрзЗ рж╕ржорж░рзНржержи ржХрж░рзБржи<br>
            ЁЯУК рж░рж┐ржпрж╝рзЗрж▓ ржЯрж╛ржЗржо ржлрж▓рж╛ржлрж▓ ржжрзЗржЦрзБржи<br>
            ЁЯПЖ ржХрзЛржи ржжрж▓ ржПржЧрж┐ржпрж╝рзЗ ржЖржЫрзЗ ржЬрж╛ржирзБржи<br>
            тЪб ржорж╛рждрзНрж░ рзз ржХрзНрж▓рж┐ржХрзЗржЗ ржнрзЛржЯ рж╕ржорзНржкржирзНржи
        </p>
    </div>
    <p style="font-size: 16px; color: #FFD700;">ЁЯСЗ ржирж┐ржЪрзЗ ржЖржкржирж╛рж░ ржкржЫржирзНржжрзЗрж░ ржжрж▓рзЗ ржХрзНрж▓рж┐ржХ ржХрж░рзБржи ЁЯСЗ</p>
</div>

<div id="voting-form">
    {% for party in parties %}
    <button class="party-button" onclick="castVote('{{ party }}')">
        {{ party }}
    </button>
    {% endfor %}
</div>

<div id="message" style="text-align: center; margin-top: 20px; font-weight: bold;"></div>

<script>
    function castVote(party) {
        document.getElementById('message').innerHTML = 
            '<span style="color: #FFD700;" class="pulse">тП│ ржнрзЛржЯ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ржзрзАржи...</span>';
            
        fetch('/vote', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({party: party})
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                document.getElementById('message').innerHTML = 
                    '<span style="color: #4CAF50;">тЬЕ ' + data.message + ' ржзржирзНржпржмрж╛ржж! ЁЯОЙ</span>';
                setTimeout(() => {
                    window.location.href = '/results';
                }, 1500);
            } else {
                document.getElementById('message').innerHTML = 
                    '<span style="color: #FF6B6B;">тЭМ ' + data.message + ' ржлрж▓рж╛ржлрж▓ ржжрзЗржЦрзБржи! ЁЯУК</span>';
                setTimeout(() => {
                    window.location.href = '/results';
                }, 2000);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            document.getElementById('message').innerHTML = 
                '<span style="color: #FF6B6B;">тЭМ ржХрж┐ржЫрзБ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗ!</span>';
        });
    }
</script>
{% endblock %}
